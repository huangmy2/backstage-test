webpackJsonp([9],{QXjW:function(t,e){},wYgP:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a={name:"videoList",data:function(){return{videoList:[],currentPage:1,multipleSelection:[],loading:!1,total:0,videoPlay:!1,playVideoInfo:{}}},created:function(){this.getData()},filters:{filterCate:function(t){var e="";switch(+t){case 1:e="资讯";break;case 2:e="观点";break;case 3:e="研报&预测";break;case 4:e="科普";break;case 5:e="日常";break;default:e="暂无dd类别"}return e},filterTitle:function(t){return t.length>15?t.slice(0,15)+"...":t}},methods:{getData:function(){var t=this;this.loading=!0,this.$axios.get("/admin/getMediaList?page="+this.currentPage+"&size=10").then(function(e){console.log(e),0===e.data.code&&(t.videoList=e.data.data.list,t.total=e.data.data.total),t.loading=!1})},closeDialog:function(){document.getElementById("video"+this.playVideoInfo.id).pause()},changepage:function(t){this.currentPage=t,this.getData()},toggleSelection:function(t){var e=this;t?t.forEach(function(t){e.$refs.multipleTable.toggleRowSelection(t)}):this.$refs.multipleTable.clearSelection()},handleSelectionChange:function(t){console.log(t),this.multipleSelection=t},changeStatus:function(t,e){var n=this,a=1===e?"审核通过":"删除";this.$confirm("确定"+a+"所选视频？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){n.$axios.get("/admin/setMediaShowstaus?ids="+t+"&status="+e).then(function(t){0===t.data.code&&n.$message({type:"success",message:a+"成功!"}),n.getData()})}).catch(function(){n.$message({type:"info",message:"已取消"})})},deleteInfo:function(){var t=[];this.multipleSelection.forEach(function(e){t.push(e.id)}),this.changeStatus(t,2)},playVideo:function(t){this.videoPlay=!0,this.playVideoInfo=t}}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"videoList"},[a("el-card",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.videoList,"tooltip-effect":"dark","max-height":"580px"},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"ID",width:"70",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.id))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"类别",width:"75",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("filterCate")(e.row.relate_type)))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"配文",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("filterTitle")(e.row.title)))]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"fav_cnt",label:"VV",width:"60",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"fav_cnt",label:"完播率",width:"60",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"fav_cnt",label:"点赞",width:"62",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"comment_cnt",label:"评论",width:"62",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"fav_cnt",label:"转发",width:"62",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"fav_cnt",label:"下载",width:"62",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"发布账号",width:"108",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.user_info.username))]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"created_at",label:"发布时间",width:"108",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"play_time",label:"时长",width:"70",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"show_status",label:"操作",align:"center",width:"74"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"btn-arr"},[0==e.row.show_status||1==e.row.show_status?a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(n){return t.changeStatus(e.row.id,2)}}},[t._v("删除")]):t._e(),t._v(" "),0==e.row.show_status||2==e.row.show_status?a("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(n){return t.changeStatus(e.row.id,1)}}},[t._v("通过")]):t._e()],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"播放",width:"50",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("img",{staticClass:"playIcon",attrs:{title:"播放",alt:"播放",src:n("MCb6")},on:{click:function(n){return t.playVideo(e.row)}}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"状态",width:"70",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(1==e.row.show_status?"已通过":2==e.row.show_status?"已删除":"未通过"))])]}}])})],1),t._v(" "),a("div",{staticClass:"stock_dom"},[a("el-button",{attrs:{round:""},on:{click:function(e){return t.toggleSelection(t.videoList)}}},[t._v("反选")]),t._v(" "),a("el-button",{attrs:{round:""},on:{click:function(e){return t.toggleSelection()}}},[t._v("清除")]),t._v(" "),a("el-button",{attrs:{round:"",type:"danger"},on:{click:function(e){return t.deleteInfo()}}},[t._v("删除")]),t._v(" "),a("el-pagination",{staticClass:"prev_block",attrs:{"hide-on-single-page":!0,layout:"total, prev, pager, next","current-page":t.currentPage,"page-size":10,total:t.total},on:{"current-change":t.changepage}})],1),t._v(" "),a("el-dialog",{attrs:{title:t.playVideoInfo.title,visible:t.videoPlay,top:"6vh",width:"40%",center:""},on:{"update:visible":function(e){t.videoPlay=e},close:t.closeDialog}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.playVideoInfo,expression:"playVideoInfo"}],staticClass:"video_info"},[a("video",{attrs:{src:t.playVideoInfo.video_url,id:"video"+t.playVideoInfo.id,"x5-playsinline":"true",playsinline:"true","webkit-playsinline":"true",muted:"",autoplay:"",controls:"controls"},domProps:{muted:!0}})])])],1)],1)},staticRenderFns:[]};var i=n("VU/8")(a,l,!1,function(t){n("QXjW")},null,null);e.default=i.exports}});
//# sourceMappingURL=9.4209de421577ac67c3a0.js.map