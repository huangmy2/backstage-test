webpackJsonp([7],{"8CoC":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={name:"userChack",data:function(){return{total:0,loading:!1,tableData:[],buttonFooter:[{text:"批量通过",type:"success",func:"pass"}],tableLabel:[{type:"selection",hidden:!1},{type:"img",label:"新头像",param:"new_avatar",align:"center",hidden:!1},{label:"原昵称",param:"nickname",align:"center",width:"200"},{label:"新昵称",param:"new_nickname",align:"center"},{label:"修改时间",type:"sortable",sortable:this.sortByDate,param:"post_at",align:"center"},{label:"操作",type:"operation",list:[{label:"",render:function(t){return 2===t.state||0===t.state?"通过":""},formatter:function(t){return"success"},func:this.chagneStatusTrue},{label:"",render:function(t){return 1===t.state||0===t.state?"拒绝":""},formatter:function(t){return"danger"},func:this.chagneStatusFalse}]}],pagination:{pageSize:20,pageNum:1,total:0},selectRows:[]}},components:{dqdTable:a("yivU").a},methods:{handleCurrentChange:function(t){this.pagination.pageNum=t,this.init()},selectChange:function(t){console.log(t),this.selectRows=t},deleteInfo:function(){var t=[];this.selectRows.forEach(function(e){t.push(e.cid)}),this.chagneStatus(t,1)},chagneStatusTrue:function(t){this.chagneStatus(t.cid,1)},chagneStatusFalse:function(t){this.chagneStatus(t.cid,2)},sortByDate:function(t,e){console.log(t);var a=t.post_at,n=e.post_at,i=a.replace(/-/g,"/"),s=n.replace(/-/g,"/");return new Date(i).getTime()-new Date(s).getTime()},chagneStatus:function(t,e){var a=this,n=1===e?"通过":"拒绝";this.$confirm("确定"+n+"？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){console.log("Ddddd"),a.$axios.get("/admin/SetUserChangeState?ids="+t+"&state="+e).then(function(t){0===t.data.code?(a.$message({type:"success",message:n+"成功!"}),a.init()):a.$message({type:"info",message:"操作失败"})})}).catch(function(){a.$message({type:"info",message:"已取消"+n})})},init:function(){var t=this;this.loading=!0,this.$axios.get("/admin/GetAccountChangelogs?page="+this.pagination.pageNum+"&size=10").then(function(e){0===e.data.code?(t.tableData=e.data.data.list||[],t.pagination.total=e.data.data.total||"",t.loading=!1,console.log(t.tableData)):console.log("无数据")})}},created:function(){this.init()}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrap"},[a("el-card",[a("dqd-table",{attrs:{isPagination:!0,"table-data":t.tableData,"table-label":t.tableLabel,pagination:t.pagination,loadingFlag:t.loading,"button-footer":t.buttonFooter},on:{handleCurrentChange:t.handleCurrentChange,selectSingle:t.selectChange,pass:t.deleteInfo}})],1)],1)},staticRenderFns:[]};var s=a("VU/8")(n,i,!1,function(t){a("G1Vf")},"data-v-34cd8795",null);e.default=s.exports},G1Vf:function(t,e){}});
//# sourceMappingURL=7.cc11e0e259ff2edd17f8.js.map