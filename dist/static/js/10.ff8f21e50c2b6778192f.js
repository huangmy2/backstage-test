webpackJsonp([10],{UWW1:function(t,e){},gSaZ:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o={name:"repoatList",data:function(){return{reportList:[],currentPage:1,multipleSelection:[],loading:!1,total:0,imgShow:!1,showImgInfo:{}}},created:function(){this.getData()},methods:{getData:function(){var t=this;this.loading=!0,this.$axios.get("/admin/comment/commentReportList?page="+this.currentPage+"&size=20").then(function(e){console.log(e),0===e.data.code&&(t.reportList=e.data.data.comment_list,t.total=e.data.data.total_count),t.loading=!1})},changepage:function(t){console.log(t),this.currentPage=t,this.getData()},sortByUp:function(t,e){return t.comment_info.up-e.comment_info.up},sortByReport:function(t,e){return t.comment_info.report-e.comment_info.report},sortByDate:function(t,e){var n=t.comment_info.created_at,o=e.comment_info.created_at,a=n.replace(/-/g,"/"),i=o.replace(/-/g,"/");return new Date(a).getTime()-new Date(i).getTime()},toggleSelection:function(t){var e=this;t?t.forEach(function(t){e.$refs.multipleTable.toggleRowSelection(t)}):this.$refs.multipleTable.clearSelection()},handleSelectionChange:function(t){console.log(t),this.multipleSelection=t},changeStatus:function(t,e){var n=this,o=1===e?"通过":"删除",a=new FormData;a.append("comment_id",t),a.append("status",e),this.$confirm("确定"+o+"所选评论？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){n.$axios.post("/admin/comment/deal",a).then(function(t){0===t.data.code&&n.$message({type:"success",message:o+"成功!"}),n.getData()})}).catch(function(){n.$message({type:"info",message:"已取消"+o})})},deleteInfo:function(){var t=[];this.multipleSelection.forEach(function(e){t.push(e.comment_info.id)}),this.changeStatus(t,2)},showImgFun:function(t){this.imgShow=!0,this.showImgInfo=t}}},a={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"videoList"},[n("el-card",[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.reportList,"tooltip-effect":"dark","max-height":"600px"},on:{"selection-change":t.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{label:"视频/评论",width:"420",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",{staticClass:"videotext"},[n("span",{staticClass:"comment_tips"},[t._v("配文")]),t._v(t._s(e.row.media_info.media_desc))]),t._v(" "),n("div",{staticClass:"yinyong"},[e.row.comment_info.quote&&e.row.comment_info.quote.content?n("p",[n("span",{staticClass:"comment_tips"},[t._v("引用")]),t._v(t._s(e.row.comment_info.quote.content))]):t._e()]),t._v(" "),n("div",{staticClass:"comtext"},[n("span",{staticClass:"comment_tips"},[t._v("评论")]),t._v(t._s(e.row.comment_info.content))]),t._v(" "),n("div",{staticClass:"commentImg",on:{click:function(n){return t.showImgFun(e.row.comment_info.attachment)}}},t._l(e.row.comment_info.attachment,function(t,e){return n("img",{key:e,attrs:{src:t.url,alt:""}})}),0)]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"fav_cnt",label:"发布用户",width:"160",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.comment_info.user_info.username))]}}])}),t._v(" "),n("el-table-column",{attrs:{sortable:"",label:"赞","sort-method":t.sortByUp,align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.row.comment_info.up)+"\n        ")]}}])}),t._v(" "),n("el-table-column",{attrs:{sortable:"",label:"举报","sort-method":t.sortByReport,align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.row.comment_info.report)+"\n        ")]}}])}),t._v(" "),n("el-table-column",{attrs:{sortable:"",label:"时间","sort-method":t.sortByDate,width:"160",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.row.comment_info.created_at)+"\n        ")]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"show_status",label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.comment_info.status||2==e.row.comment_info.status?n("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(n){return t.changeStatus([e.row.comment_info.id],1)}}},[t._v("通过")]):t._e(),t._v(" "),0==e.row.comment_info.status||1==e.row.comment_info.status?n("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(n){return t.changeStatus([e.row.comment_info.id],2)}}},[t._v("删除")]):t._e()]}}])}),t._v(" "),n("el-table-column",{attrs:{sortable:"",label:"状态",width:"70",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.comment_info.status_desc||"未审核"))]}}])})],1),t._v(" "),n("div",{staticClass:"stock_dom"},[n("el-button",{attrs:{round:""},on:{click:function(e){return t.toggleSelection(t.reportList)}}},[t._v("反选")]),t._v(" "),n("el-button",{attrs:{round:""},on:{click:function(e){return t.toggleSelection()}}},[t._v("清除")]),t._v(" "),n("el-button",{attrs:{round:"",type:"danger"},on:{click:function(e){return t.deleteInfo(t.scope.row.id)}}},[t._v("删除")]),t._v(" "),n("el-pagination",{staticClass:"prev_block",attrs:{"hide-on-single-page":!0,layout:"total, prev, pager, next","current-page":t.currentPage,"page-size":10,total:t.total},on:{"current-change":t.changepage}})],1),t._v(" "),n("el-dialog",{attrs:{title:"评论配图",visible:t.imgShow,top:"6vh",width:"74%",center:""},on:{"update:visible":function(e){t.imgShow=e}}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.imgShow,expression:"imgShow"}],staticClass:"img_info"},t._l(t.showImgInfo,function(e,o){return n("img",{key:o,class:t.showImgInfo.length>1?"long":"short",attrs:{src:e.url,alt:""}})}),0)])],1)],1)},staticRenderFns:[]};var i=n("VU/8")(o,a,!1,function(t){n("UWW1")},null,null);e.default=i.exports}});
//# sourceMappingURL=10.ff8f21e50c2b6778192f.js.map