webpackJsonp([3],{ZwZv:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o={name:"videoList",data:function(){return{videoList:[],currentPage:1,multipleSelection:[],loading:!1,total:0,videoPlay:!1,playVideoInfo:{}}},created:function(){this.getData()},methods:{getData:function(){var t=this;this.loading=!0,this.$axios.get("/admin/getReportMediaList?page="+this.currentPage+"&size=10").then(function(e){console.log(e),0===e.data.code&&(t.videoList=e.data.data.list,t.total=e.data.data.total),t.loading=!1})},sortByReport:function(t,e){return t.report_count-e.report_count},closeDialog:function(){document.getElementById("video"+this.playVideoInfo.id).pause()},changepage:function(t){this.currentPage=t,this.getData()},toggleSelection:function(t){var e=this;t?t.forEach(function(t){e.$refs.multipleTable.toggleRowSelection(t)}):this.$refs.multipleTable.clearSelection()},handleSelectionChange:function(t){console.log(t),this.multipleSelection=t},changeStatus:function(t,e){var n=this,o=1===e?"审核通过":"删除";this.$confirm("确定"+o+"所选视频？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){n.$axios.get("/admin/setMediaShowstaus?ids="+t+"&status="+e).then(function(t){0===t.data.code&&n.$message({type:"success",message:o+"成功!"}),n.getData()})}).catch(function(){n.$message({type:"info",message:"已取消"})})},deleteInfo:function(){var t=[];this.multipleSelection.forEach(function(e){t.push(e.id)}),this.changeStatus(t,2)},playVideo:function(t){this.videoPlay=!0,this.playVideoInfo=t}}},a={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"videoList"},[o("el-card",[o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.videoList,"tooltip-effect":"dark","max-height":"580px"},on:{"selection-change":t.handleSelectionChange}},[o("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),t._v(" "),o("el-table-column",{attrs:{label:"视频",width:"280",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.title))]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"发布账号",width:"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.user_info.username))]}}])}),t._v(" "),o("el-table-column",{attrs:{prop:"fav_cnt",label:"赞",align:"center"}}),t._v(" "),o("el-table-column",{attrs:{sortable:"",label:"举报","sort-method":t.sortByReport,width:"70",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.row.report_count)+"\n        ")]}}])}),t._v(" "),o("el-table-column",{attrs:{prop:"created_at",label:"时间",width:"180",align:"center"}}),t._v(" "),o("el-table-column",{attrs:{label:"播放",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[o("img",{staticClass:"playIcon",attrs:{title:"播放",alt:"播放",src:n("MCb6")},on:{click:function(n){return t.playVideo(e.row)}}})]}}])}),t._v(" "),o("el-table-column",{attrs:{prop:"show_status",label:"操作",align:"center",width:"90"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("div",{staticClass:"btn-arr"},[0==e.row.show_status||1==e.row.show_status?o("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(n){return t.changeStatus(e.row.id,2)}}},[t._v("删除")]):t._e(),t._v(" "),0==e.row.show_status||2==e.row.show_status?o("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(n){return t.changeStatus(e.row.id,1)}}},[t._v("通过")]):t._e()],1)]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"状态",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("span",[t._v(t._s(1==e.row.show_status?"已通过":2==e.row.show_status?"已删除":"未通过"))])]}}])})],1),t._v(" "),o("div",{staticClass:"stock_dom"},[o("el-button",{attrs:{round:""},on:{click:function(e){return t.toggleSelection(t.videoList)}}},[t._v("反选")]),t._v(" "),o("el-button",{attrs:{round:""},on:{click:function(e){return t.toggleSelection()}}},[t._v("清除")]),t._v(" "),o("el-button",{attrs:{round:"",type:"danger"},on:{click:function(e){return t.deleteInfo()}}},[t._v("删除")]),t._v(" "),o("el-pagination",{staticClass:"prev_block",attrs:{"hide-on-single-page":!0,layout:"total, prev, pager, next","current-page":t.currentPage,"page-size":10,total:t.total},on:{"current-change":t.changepage}})],1),t._v(" "),o("el-dialog",{attrs:{title:t.playVideoInfo.title,visible:t.videoPlay,top:"6vh",width:"40%",center:""},on:{"update:visible":function(e){t.videoPlay=e},close:t.closeDialog}},[o("div",{directives:[{name:"show",rawName:"v-show",value:t.playVideoInfo,expression:"playVideoInfo"}],staticClass:"video_info"},[o("video",{attrs:{src:t.playVideoInfo.video_url,id:"video"+t.playVideoInfo.id,"x5-playsinline":"true",playsinline:"true","webkit-playsinline":"true",muted:"",autoplay:"",controls:"controls"},domProps:{muted:!0}})])])],1)],1)},staticRenderFns:[]};var i=n("VU/8")(o,a,!1,function(t){n("uJ0d")},null,null);e.default=i.exports},uJ0d:function(t,e){}});
//# sourceMappingURL=3.4e85f1f0dedd6196911a.js.map